;------------------------------------------------------------------------------
Object TechArtilleryPlatform

  ; *** ART Parameters ***
  SelectPortrait         = SAArtillery_L
  ButtonImage            = SAArtillery
  
  
  ; ========================= Main Model ===============================
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; DAY **************************************************************
    DefaultConditionState
      Model                           = ZBARTPLAT
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponRecoilBone                = PRIMARY Barrel
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End
    ConditionState  = CAPTURED
      Model         = ZBARTPLAT
;      Animation     = ZBARTPLAT.ZBARTPLAT
;      AnimationMode = LOOP
    End
    
    ; DAMAGED **********************************************************
    ConditionState  = DAMAGED
      Model         = ZBARTPLAT_D
    End
    ConditionState  = DAMAGED CAPTURED
      Model         = ZBARTPLAT_D
;      Animation     = ZBARTPLAT_D.ZBARTPLAT_D
;      AnimationMode = LOOP
    End
    
    ; REALLYDAMAGED ****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBARTPLAT_E
    End
    ConditionState  = REALLYDAMAGED CAPTURED
      Model         = ZBARTPLAT_E
;      Animation     = ZBARTPLAT_E.ZBARTPLAT_E
      AnimationMode = LOOP
    End

    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = ZBARTPLAT_R
    End

    ; NIGHT ************************************************************
    ConditionState  = NIGHT
      Model         = ZBARTPLAT_N
    End
    ConditionState  = NIGHT CAPTURED
      Model         = ZBARTPLAT_N
;      Animation     = ZBARTPLAT_N.ZBARTPLAT_N
;      AnimationMode = LOOP
    End
    
    ; NIGHT DAMAGED ****************************************************
    ConditionState  = DAMAGED NIGHT
      Model         = ZBARTPLAT_D
    End
    ConditionState  = DAMAGED NIGHT CAPTURED
      Model         = ZBARTPLAT_D
;      Animation     = ZBARTPLAT_D.ZBARTPLAT_D
;      AnimationMode = LOOP
    End
    
    ; NIGHT REALLYDAMAGED **********************************************
    ConditionState  = REALLYDAMAGED NIGHT
      Model         = ZBARTPLAT_E
    End
    ConditionState  = REALLYDAMAGED NIGHT CAPTURED
      Model         = ZBARTPLAT_E
;      Animation     = ZBARTPLAT_E.ZBARTPLAT_E
;      AnimationMode = LOOP
    End

    ; NIGHT RUBBLE *****************************************************
    ConditionState  = NIGHT RUBBLE
      Model         = ZBARTPLAT_R
    End
    
    ; SNOW *************************************************************
    ConditionState  = SNOW
      Model         = ZBARTPLAT_S
    End
    ConditionState  = SNOW CAPTURED
      Model         = ZBARTPLAT_S
;      Animation     = ZBARTPLAT_S.ZBARTPLAT_S
;      AnimationMode = LOOP
    End
    
    ; SNOW DAMAGED *****************************************************
    ConditionState  = DAMAGED SNOW
      Model         = ZBARTPLAT_DS
    End
    ConditionState  = DAMAGED SNOW CAPTURED
      Model         = ZBARTPLAT_DS
;      Animation     = ZBARTPLAT_DS.ZBARTPLAT_DS
;      AnimationMode = LOOP
    End
    
    ; SNOW REALLYDAMAGED ***********************************************
    ConditionState  = REALLYDAMAGED SNOW
      Model         = ZBARTPLAT_ES
    End
    ConditionState  = REALLYDAMAGED SNOW CAPTURED
      Model         = ZBARTPLAT_ES
;      Animation     = ZBARTPLAT_ES.ZBARTPLAT_ES
;      AnimationMode = LOOP
    End

    ; SNOW RUBBLE ******************************************************
    ConditionState  = SNOW RUBBLE
      Model         = ZBARTPLAT_RS
    End
    
    ; SNOW NIGHT *******************************************************
    ConditionState  = SNOW NIGHT
      Model         = ZBARTPLAT_NS
    End
    ConditionState  = SNOW NIGHT CAPTURED
      Model         = ZBARTPLAT_NS
;      Animation     = ZBARTPLAT_NS.ZBARTPLAT_NS
;      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT DAMAGED ***********************************************
    ConditionState  = SNOW NIGHT DAMAGED
      Model         = ZBARTPLAT_DNS
    End
    ConditionState  = SNOW NIGHT DAMAGED CAPTURED
      Model         = ZBARTPLAT_DNS
;      Animation     = ZBARTPLAT_DNS.ZBARTPLAT_DNS
;      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT REALLYDAMAGED *****************************************
    ConditionState  = SNOW NIGHT REALLYDAMAGED
      Model         = ZBARTPLAT_ENS
    End
    ConditionState  = SNOW NIGHT REALLYDAMAGED CAPTURED
      Model         = ZBARTPLAT_ENS
;      Animation     = ZBARTPLAT_EN.ZBARTPLAT_ENS
;      AnimationMode = LOOP
    End
    
    ; SNOW NIGHT RUBBLE ************************************************
    ConditionState  = SNOW NIGHT RUBBLE
      Model         = ZBARTPLAT_RS
    End
    
  End

  ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBODerrick_F
      Animation     = ZBODerrick_F.ZBODerrick_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_FE
      Animation     = ZBODerrick_FE.ZBODerrick_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
 ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechArtilleryPlatform
  EditorSorting   = STRUCTURE
  VisionRange    = 360.0
  ShroudClearingRange = 360
  ; *** ENGINEERING Parameters ***  
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE TECH_BUILDING CAN_ATTACK TECH_BASE_DEFENSE CONSERVATIVE_BUILDING
  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  WeaponSet
    Conditions           = None 
    Weapon               = PRIMARY ArtilleryPlatformGun
  End
  CommandSet = StopOnlyGenericCommandSet
  Behavior                = FlammableUpdate ModuleTag_05
    FlameDamageLimit      = 20    ; Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ; in a span of this long
    AflameDuration        = 5000  ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 25    ; taking this much damage...
    AflameDamageDelay     = 500   ; this often.
  End
  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 180   // turn rate, in degrees per sec
      TurretPitchRate       = 180
      AllowsPitch           = Yes
      NaturalTurretPitch    = 45   
      GroundUnitPitch       = 20
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY
      MinIdleScanInterval   = 250    ; in milliseconds
      MaxIdleScanInterval   = 250    ; in milliseconds
      MinIdleScanAngle      = 0       ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS; defensive weapon
    MoodAttackCheckRate        = 250
  End

  Behavior             = FXListDie ModuleTag_07
    DeathFX            = WeaponFX_BombTruckDefaultBombDetonation
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior = TransitionDamageFX ModuleTag_08
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Behavior = TechBuildingBehavior ModuleTag_09
  End
  Behavior = FXListDie ModuleTag_10
    DeathFX = FX_BuildingDie
  End
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End

  Behavior = ProductionUpdate ModuleTag_12
  End
  Geometry              = BOX
  GeometryMajorRadius   = 23.0
  GeometryMinorRadius   = 21.0
  GeometryHeight        = 30.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME


End





;------------------------------------------------------------------------------
Object TechReinforcementPad

  ; *** ART Parameters ***
  SelectPortrait         = LandingPad_L
  ButtonImage            = LandingPad
  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ZBLndBay
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay.ZBLndBay
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ZBLndBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_D.ZBLndBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ZBLndBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ZBLndBay_N
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_N.ZBLndBay_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ZBLndBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_D.ZBLndBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ZBLndBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_E.ZBLndBay_E
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ZBLndBay_S
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_S.ZBLndBay_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ZBLndBay_DS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_DS.ZBLndBay_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ZBLndBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_ES.ZBLndBay_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ZBLndBay_NS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_NS.ZBLndBay_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ZBLndBay_DSN
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_DSN.ZBLndBay_DSN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ZBLndBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBLndBay_ES.ZBLndBay_ES
      AnimationMode      = LOOP
    End
  End  
    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBLndBay_F
      Animation     = ZBLndBay_F.ZBLndBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBLndBay_FE
      Animation     = ZBLndBay_FE.ZBLndBay_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = 45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechReinforcementPad
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE SCORE TECH_BUILDING CAPTURABLE NO_COLLIDE AUTO_RALLYPOINT CONSERVATIVE_BUILDING
  RadarPriority       = STRUCTURE
  
  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 1000.0
    InitialHealth     = 1000.0
  End

  Behavior       = OCLUpdate ModuleTag_05 ; Context window is a reaction to this, no CommandSet 
    MinDelay     = 120000
    MaxDelay     = 120000
    CreateAtEdge = Yes ; as opposed to just creating on self

    FactionTriggered = Yes ; This requires a controlling player before it works
    FactionOCL   = Faction:America                   OCL:OCL_ReinforcementPadUSAVehicle
    FactionOCL   = Faction:AmericaSuperWeaponGeneral OCL:OCL_SWGen_ReinforcementPadUSAVehicle
    FactionOCL   = Faction:AmericaLaserGeneral       OCL:OCL_LGen_ReinforcementPadUSAVehicle
    FactionOCL   = Faction:AmericaAirForceGeneral    OCL:OCL_AFGen_ReinforcementPadUSAVehicle

    FactionOCL   = Faction:China                     OCL:OCL_ReinforcementPadCHIVehicle
    FactionOCL   = Faction:ChinaTankGeneral          OCL:OCL_TnkGen_ReinforcementPadCHIVehicle
    FactionOCL   = Faction:ChinaInfantryGeneral      OCL:OCL_InfGen_ReinforcementPadCHIVehicle
    FactionOCL   = Faction:ChinaNukeGeneral          OCL:OCL_NukeGen_ReinforcementPadCHIVehicle

    FactionOCL   = Faction:GLA                       OCL:OCL_ReinforcementPadGLAVehicle
    FactionOCL   = Faction:GLAToxinGeneral           OCL:OCL_ToxGen_ReinforcementPadGLAVehicle
    FactionOCL   = Faction:GLADemolitionGeneral      OCL:OCL_DemoGen_ReinforcementPadGLAVehicle
    FactionOCL   = Faction:GLAStealthGeneral         OCL:OCL_StlthGen_ReinforcementPadGLAVehicle
  End

  Behavior = DestroyDie ModuleTag_06
  End
  
  Behavior            = DefaultProductionExitUpdate ModuleTag_07
    NaturalRallyPoint = X: 0.0  Y:-60.0  Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
    UseSpawnRallyPoint = Yes
  End

  Behavior             = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 15.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End






;------------------------------------------------------------------------------
Object TechRepairPad

  ; *** ART Parameters ***
  SelectPortrait         = SADropZone_L
  ButtonImage            = SADropZone
  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ABSupDrop
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop.ABSupDrop
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ABSupDrop_D
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_D.ABSupDrop_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ABSupDrop_E
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_E.ABSupDrop_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ABSupDrop_N
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_N.ABSupDrop_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ABSupDrop_DN
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DN.ABSupDrop_DN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ABSupDrop_EN
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_EN.ABSupDrop_EN
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ABSupDrop_S
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_S.ABSupDrop_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ABSupDrop_DS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DS.ABSupDrop_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ABSupDrop_ES
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_ES.ABSupDrop_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ABSupDrop_NS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_NS.ABSupDrop_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ABSupDrop_DNS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_DNS.ABSupDrop_DNS
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ABSupDrop_ENS
      ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ABSupDrop_ENS.ABSupDrop_ENS
      AnimationMode      = LOOP
    End
  End  
    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBODerrick_F
      Animation     = ZBODerrick_F.ZBODerrick_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBODerrick_FE
      Animation     = ZBODerrick_FE.ZBODerrick_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechRepairPad
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
 ;**FIX**?
; CommandSet          = TechReinforcementPadCommandSet
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE SCORE TECH_BUILDING CAPTURABLE REPAIR_PAD CONSERVATIVE_BUILDING FS_AIRFIELD
  RadarPriority       = STRUCTURE
  
  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 1000.0
    InitialHealth     = 1000.0
  End
  Behavior = RepairDockUpdate ModuleTag_05
    TimeForFullHeal   = 5000   ;(in milliseconds)   
    AllowsPassthrough = Yes 
    NumberApproachPositions = 5
  End

  Behavior = ParkingPlaceBehavior ModuleTag_33
    HealAmountPerSecond = 10
    NumRows             = 1
    NumCols             = 2
    HasRunways          = Yes
    ApproachHeight      = 30
  End

  Behavior  = DestroyDie ModuleTag_06
  End
  Behavior                  = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 27.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End
;------------------------------------------------------------------------------
Object TechRepairbay

  ; *** ART Parameters ***
  SelectPortrait         = RepairBay_L
  ButtonImage            = RepairBay
  Draw                 = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes   
    ConditionState       = NONE
      Model              = ZBRprBay
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay.ZBRprBay
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = ZBRprBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_D.ZBRprBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE
      Model              = ZBRprBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_E.ZBRprBay_E
      AnimationMode      = LOOP
    End
    
    ConditionState       = NIGHT
      Model              = ZBRprBay_N
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_N.ZBRprBay_N
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT
      Model              = ZBRprBay_D
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_D.ZBRprBay_D
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model              = ZBRprBay_E
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_E.ZBRprBay_E
      AnimationMode      = LOOP
    End
    
    ;----------- SNOW
    
    ConditionState       = SNOW
      Model              = ZBRprBay_S
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_S.ZBRprBay_S
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED SNOW
      Model              = ZBRprBay_DS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_DS.ZBRprBay_DS

      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model              = ZBRprBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_ES.ZBRprBay_ES
      AnimationMode      = LOOP
    End
    
    ;---------- SNOW NIGHT
    
    ConditionState       = NIGHT SNOW
      Model              = ZBRprBay_NS
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_NS.ZBRprBay_NS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = ZBRprBay_DSN
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_DSN.ZBRprBay_DSN
      AnimationMode      = LOOP
    End
   
    ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = ZBRprBay_ES
      ;ParticleSysBone    = Flare01 LandingZoneSmoke
      Animation          = ZBRprBay_ES.ZBRprBay_ES
      AnimationMode      = LOOP
    End

  End  
    ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    
    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBRprBay_F
      Animation     = ZBRprBay_F.ZBRprBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED
    
    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBRprBay_FE
      Animation     = ZBRprBay_FE.ZBRprBay_FE
      AnimationMode = LOOP
    End
    
    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = 45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechRepairBay
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
  CommandSet = TechReinforcementPadCommandSet
  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = TechReinforcementPadCommandSetUpgrade
    TriggeredBy = Upgrade_SecretTech
  End
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***  
  KindOf              = STRUCTURE SELECTABLE IMMOBILE SCORE TECH_BUILDING CAPTURABLE NO_COLLIDE CONSERVATIVE_BUILDING FS_FACTORY FS_WARFACTORY AUTO_RALLYPOINT
  RadarPriority       = STRUCTURE

  Behavior = ProductionUpdate ModuleTag_15
    NumDoorAnimations = 1
    DoorOpeningTime = 3000 ;in mSeconds
    DoorWaitOpenTime = 3000 ;in mSeconds
    DoorCloseTime = 3000 ;in mSeconds
    ConstructionCompleteDuration = 1500 ;in mSeconds
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_16
    UnitCreatePoint = X:0.0 Y: 0.0 Z:0.0
    NaturalRallyPoint = X: 60.0 Y: 0.0 Z:0.0
  End
  
  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 1000.0
    InitialHealth     = 1000.0
  End
 
  Behavior                  = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End 
  
  ;Kris: Cut, functionality changed to grant autoheal to army.
  ;Behavior = RepairDockUpdate ModuleTag_13
  ;  TimeForFullHeal   = 5000   ;(in milliseconds)     
  ;  NumberApproachPositions = 5
  ;End

  Behavior = AutoHealBehavior ModuleTag_AutoHeal01
    HealingAmount     = 2
    HealingDelay      = 1000 ; msec
    AffectsWholePlayer = Yes
    StartsActive      = Yes
    KindOf            = VEHICLE
    ForbiddenKindOf   = AIRCRAFT
  End


  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 27.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End


;------------------------------------------------------------------------------
Object TechTEROutPost

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
  OkToChangeModelColor = Yes


    ; day
    ConditionState = NONE
      Model         = CBTOutpost
    End
    ConditionState = DAMAGED
      Model         = CBTOutpost_D
    End
    ConditionState = REALLYDAMAGED
      Model         = CBTOutpost_E
    End
    ConditionState = RUBBLE
      Model         = CBTOutpost_R
    End

    ; day garrisoned
    ConditionState = GARRISONED
      Model         = CBTOutpost_G
      Animation     = CBTOutpost_G.CBTOutpost_G
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED GARRISONED
      Model         = CBTOutpost_DG
      Animation     = CBTOutpost_DG.CBTOutpost_DG
      AnimationMode = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model         = CBTOutpost_N
    End
    ConditionState = DAMAGED NIGHT
      Model         = CBTOutpost_DN
    End
    ConditionState = REALLYDAMAGED NIGHT
      Model         = CBTOutpost_EN
    End
    ConditionState = RUBBLE NIGHT
      Model         = CBTOutpost_RN
    End

    ; night garrisoned
    ConditionState = NIGHT GARRISONED
      Model         = CBTOutpost_NG
      Animation     = CBTOutpost_NG.CBTOutpost_NG
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT GARRISONED
      Model         = CBTOutpost_DNG
      Animation     = CBTOutpost_DNG.CBTOutpost_DNG
      AnimationMode = LOOP
    End



    ; Snow
    ConditionState = SNOW
      Model         = CBTOutpost_S
    End
    ConditionState = DAMAGED SNOW
      Model         = CBTOutpost_DS
    End
    ConditionState = REALLYDAMAGED SNOW
      Model         = CBTOutpost_ES
    End
    ConditionState = RUBBLE SNOW
      Model         = CBTOutpost_RS
    End


    ; snow garrisoned
    ConditionState = SNOW GARRISONED
      Model         = CBTOutpost_SG
      Animation     = CBTOutpost_SG.CBTOutpost_SG
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW GARRISONED
      Model         = CBTOutpost_DSG
      Animation     = CBTOutpost_DSG.CBTOutpost_DSG
      AnimationMode = LOOP
    End

    ; night snow
    ConditionState = SNOW NIGHT
      Model         = CBTOutpost_SN
    End
    ConditionState = DAMAGED SNOW NIGHT
      Model         = CBTOutpost_DSN
    End
    ConditionState = REALLYDAMAGED SNOW NIGHT
      Model         = CBTOutpost_ESN
    End
    ConditionState = RUBBLE SNOW NIGHT
      Model         = CBTOutpost_RSN
    End

    ; night snow garrisoned
    ConditionState = SNOW NIGHT GARRISONED
      Model         = CBTOutpost_SNG
      Animation     = CBTOutpost_SNG.CBTOutpost_SNG
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW NIGHT GARRISONED
      Model         = CBTOutpost_DSNG
      Animation     = CBTOutpost_DSNG.CBTOutpost_DSNG
      AnimationMode = LOOP
    End
  End

     ; ========================= Flag Model ===============================
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    ; DEFAULT & DAMAGED ************************************************
    ConditionState  = NONE
      Model         = ZBLndBay_F
      Animation     = ZBLndBay_F.ZBLndBay_F
      AnimationMode = LOOP
    End
    AliasConditionState = DAMAGED

    ; REALLYDAMAGED*****************************************************
    ConditionState  = REALLYDAMAGED
      Model         = ZBLndBay_FE
      Animation     = ZBLndBay_FE.ZBLndBay_FE
      AnimationMode = LOOP
    End

    ; RUBBLE ***********************************************************
    ConditionState  = RUBBLE
      Model         = None
    End
  End
  PlacementViewAngle = 45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:TechTEROutPost
  EditorSorting       = STRUCTURE
  Prerequisites
  End
  EnergyProduction = 0
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyDropZoneSelect

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf              = STRUCTURE SELECTABLE IMMOBILE SCORE TECH_BUILDING CAPTURABLE NO_COLLIDE AUTO_RALLYPOINT CONSERVATIVE_BUILDING
  RadarPriority       = STRUCTURE

  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 1000.0
    InitialHealth     = 1000.0
  End

  Behavior       = OCLUpdate ModuleTag_05 ; Context window is a reaction to this, no CommandSet
    MinDelay     = 120000
    MaxDelay     = 120000
    CreateAtEdge = Yes ; as opposed to just creating on self

    FactionTriggered = Yes ; This requires a controlling player before it works
    FactionOCL   = Faction:America                   OCL:OCL_America_ReinforcementPadInfantry
    FactionOCL   = Faction:AmericaSuperWeaponGeneral OCL:OCL_SupW_ReinforcementPadInfantry
    FactionOCL   = Faction:AmericaLaserGeneral       OCL:OCL_Lazr_ReinforcementPadInfantry
    FactionOCL   = Faction:AmericaAirForceGeneral    OCL:OCL_AirF_ReinforcementPadInfantry

    FactionOCL   = Faction:China                     OCL:OCL_China_ReinforcementPadInfantry
    FactionOCL   = Faction:ChinaTankGeneral          OCL:OCL_Tank_ReinforcementPadInfantry
    FactionOCL   = Faction:ChinaInfantryGeneral      OCL:OCL_Infa_ReinforcementPadInfantry
    FactionOCL   = Faction:ChinaNukeGeneral          OCL:OCL_Nuke_ReinforcementPadInfantry

    FactionOCL   = Faction:GLA                       OCL:OCL_GLA_ReinforcementPadInfantry
    FactionOCL   = Faction:GLAToxinGeneral           OCL:OCL_Chem_ReinforcementPadInfantry
    FactionOCL   = Faction:GLADemolitionGeneral      OCL:OCL_Demo_ReinforcementPadInfantry
    FactionOCL   = Faction:GLAStealthGeneral         OCL:OCL_Slth_ReinforcementPadInfantry
  End

  Behavior = DestroyDie ModuleTag_06
  End

  Behavior            = DefaultProductionExitUpdate ModuleTag_07
    NaturalRallyPoint = X: 60.0  Y:0.0  Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
    UseSpawnRallyPoint = Yes
  End

  Behavior             = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End
  Behavior = TransitionDamageFX ModuleTag_13
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 15.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object TechSecretLab

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
  OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model         = CBSECRTLAB
    End
    ConditionState = DAMAGED
      Model         = CBSECRTLAB_D
    End
    ConditionState = REALLYDAMAGED
      Model         = CBSECRTLAB_E
    End
    ConditionState = RUBBLE
      Model         = CBSECRTLAB_R
    End

    ; day garrisoned
    ConditionState = GARRISONED
      Model         = CBSECRTLAB_G
      Animation     = CBSECRTLAB_G.CBSECRTLAB_G
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED GARRISONED
      Model         = CBSECRTLAB_DG
      Animation     = CBSECRTLAB_DG.CBSECRTLAB_DG
      AnimationMode = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model         = CBSECRTLAB_N
    End
    ConditionState = DAMAGED NIGHT
      Model         = CBSECRTLAB_DN
    End
    ConditionState = REALLYDAMAGED NIGHT
      Model         = CBSECRTLAB_EN
    End
    ConditionState = RUBBLE NIGHT
      Model         = CBSECRTLAB_RN
    End

        ; night garrisoned
    ConditionState = NIGHT GARRISONED
      Model         = CBSECRTLAB_NG
      Animation     = CBSECRTLAB_NG.CBSECRTLAB_NG
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT GARRISONED
      Model         = CBSECRTLAB_DNG
      Animation     = CBSECRTLAB_DNG.CBSECRTLAB_DNG
      AnimationMode = LOOP
    End



    ; Snow
    ConditionState = SNOW
      Model         = CBSECRTLAB_S
    End
    ConditionState = DAMAGED SNOW
      Model         = CBSECRTLAB_DS
    End
    ConditionState = REALLYDAMAGED SNOW
      Model         = CBSECRTLAB_ES
    End
    ConditionState = RUBBLE SNOW
      Model         = CBSECRTLAB_RS
    End


    ; snow garrisoned
    ConditionState = SNOW GARRISONED
      Model         = CBSECRTLAB_SG
      Animation     = CBSECRTLAB_SG.CBSECRTLAB_SG
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW GARRISONED
      Model         = CBSECRTLAB_DSG
      Animation     = CBSECRTLAB_DSG.CBSECRTLAB_DSG
      AnimationMode = LOOP
    End

    ; night snow
    ConditionState = SNOW NIGHT
      Model         = CBSECRTLAB_SN
    End
    ConditionState = DAMAGED SNOW NIGHT
      Model         = CBSECRTLAB_DSN
    End
    ConditionState = REALLYDAMAGED SNOW NIGHT
      Model         = CBSECRTLAB_ESN
    End
    ConditionState = RUBBLE SNOW NIGHT
      Model         = CBSECRTLAB_RSN
    End

    ; night snow garrisoned
    ConditionState = SNOW NIGHT GARRISONED
      Model         = CBSECRTLAB_SNG
      Animation     = CBSECRTLAB_SNG.CBSECRTLAB_SNG
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW NIGHT GARRISONED
      Model         = CBSECRTLAB_DSNG
      Animation     = CBSECRTLAB_DSNG.CBSECRTLAB_DSNG
      AnimationMode = LOOP
    End
  End

  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SecretLab
  EditorSorting   = STRUCTURE
  CommandSet = TechSecretLabCommandSet
  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = TechReinforcementPadCommandSet
    TriggeredBy = Upgrade_SecretTech
  End
  Behavior = ProductionUpdate ModuleTag_12
  End

  ; *** ENGINEERING Parameters ***
  KindOf                = STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE NO_COLLIDE AUTO_RALLYPOINT CONSERVATIVE_BUILDING FS_WARFACTORY
  Body                  = ActiveBody ModuleTag_02
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  Behavior = FlammableUpdate ModuleTag_05
    FlameDamageLimit = 20         ;Catch fire if I take this much fire damage...
    FlameDamageExpiration = 2000  ;in a span of this long
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 25       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_06
    ;-------------DESIGNED FOR MEDIUM SIZED CIVILIAN BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1          = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
    ;--------------------------------------------------------------------------------------
    RubbleParticleSystem1              = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    RubbleParticleSystem2              = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    RubbleParticleSystem3              = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
    RubbleParticleSystem4              = Bone:None RandomBone:No PSys:StructureTransitionMediumFlare
  End

  Behavior = FXListDie ModuleTag_07
    DeathFX = FX_BuildingDie
  End

  Geometry              = BOX
  GeometryMajorRadius   = 41.0
  GeometryMinorRadius   = 44.0
  GeometryHeight        = 75.0
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME

End

;-------------------------------auto repair aircraft done-----------------------------------------------
Object TechAirCommunicationTower

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
  OkToChangeModelColor = Yes


    ; day
    ConditionState  = NONE
      Model         = CBETVStat
      Animation     = CBETVStat.CBETVStat
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED
      Model         = CBETVStat_D
      Animation     = CBETVStat_D.CBETVStat_D
      AnimationMode = LOOP
    End
    ConditionState  = REALLYDAMAGED
      Model         = CBETVStat_E
    End
    ConditionState  = RUBBLE
      Model         = CBETVStat_R
    End

    ; day garrisoned
    ConditionState  = GARRISONED
      Model         = CBETVStat_G
      Animation     = CBETVStat_G.CBETVStat_G
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED GARRISONED
      Model         = CBETVStat_DG
      Animation     = CBETVStat_DG.CBETVStat_DG
      AnimationMode = LOOP
    End


    ; night
    ConditionState  = NIGHT
      Model         = CBETVStat_N
      Animation     = CBETVStat_N.CBETVStat_N
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED NIGHT
      Model         = CBETVStat_DN
      Animation     = CBETVStat_DN.CBETVStat_DN
      AnimationMode = LOOP
    End
    ConditionState  = REALLYDAMAGED NIGHT
      Model         = CBETVStat_E
    End
    ConditionState  = RUBBLE NIGHT
      Model         = CBETVStat_R
    End

    ; night garrisoned
    ConditionState  = NIGHT GARRISONED
      Model         = CBETVStat_NG
      Animation     = CBETVStat_NG.CBETVStat_NG
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED NIGHT GARRISONED
      Model         = CBETVStat_DNG
      Animation     = CBETVStat_DNG.CBETVStat_DNG
      AnimationMode = LOOP
    End


    ;Snow States

    ConditionState  = SNOW
      Model         = CBETVStat_S
      Animation     = CBETVStat_S.CBETVStat_S
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED SNOW
      Model         = CBETVStat_DS
      Animation     = CBETVStat_DS.CBETVStat_DS
      AnimationMode = LOOP
    End
    ConditionState  = REALLYDAMAGED SNOW
      Model         = CBETVStat_ES
    End
    ConditionState  = RUBBLE SNOW
      Model         = CBETVStat_RS
    End

    ; snow garrisoned
    ConditionState  = GARRISONED SNOW
      Model         = CBETVStat_SG
      Animation     = CBETVStat_SG.CBETVStat_SG
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED GARRISONED SNOW
      Model         = CBETVStat_DSG
      Animation     = CBETVStat_DSG.CBETVStat_DSG
      AnimationMode = LOOP
    End


    ; night snow
    ConditionState  = NIGHT SNOW
      Model         = CBETVStat_SN
      Animation     = CBETVStat_SN.CBETVStat_SN
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED NIGHT SNOW
      Model         = CBETVStat_DSN
      Animation     = CBETVStat_DSN.CBETVStat_DSN
      AnimationMode = LOOP
    End
    ConditionState  = REALLYDAMAGED NIGHT SNOW
      Model         = CBETVStat_ESN
    End
    ConditionState  = RUBBLE NIGHT SNOW
      Model         = CBETVStat_RSN
    End

    ; night garrisoned snow
    ConditionState  = NIGHT GARRISONED SNOW
      Model         = CBETVStat_SNG
      Animation     = CBETVStat_SNG.CBETVStat_SNG
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED NIGHT GARRISONED SNOW
      Model         = CBETVStat_DSNG
      Animation     = CBETVStat_DSNG.CBETVStat_DSNG
      AnimationMode = LOOP
    End
  End

  ; *** AUDIO Parameters ***
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TechAirCommunicationTower
  EditorSorting   = STRUCTURE
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** ENGINEERING Parameters ***
  KindOf              = STRUCTURE SELECTABLE IMMOBILE SCORE TECH_BUILDING CAPTURABLE NO_COLLIDE CONSERVATIVE_BUILDING
  RadarPriority       = STRUCTURE

  Body                = ActiveBody ModuleTag_04
    MaxHealth         = 1000.0
    InitialHealth     = 1000.0
  End

  Behavior                  = CreateObjectDie ModuleTag_08
    CreationList       = OCL_LargeStructureDebris
  End

  Behavior             = FlammableUpdate ModuleTag_09
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End
  Behavior                  = FXListDie ModuleTag_10
    DeathFX            = FX_StructureMediumDeath
  End
  Behavior = TechBuildingBehavior ModuleTag_12
  End
  Behavior = KeepObjectDie ModuleTag_IWantRubble
  End
  Behavior = BaseRegenerateUpdate ModuleTag_11
  End

  Behavior = AutoHealBehavior ModuleTag_AutoHeal01
    HealingAmount     = 2
    HealingDelay      = 1000 ; msec
    AffectsWholePlayer = Yes
    StartsActive      = Yes
    KindOf            = AIRCRAFT
  End


  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 27.0
  GeometryHeight      = 9.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME

End
;-----------------------------------soviet nuke----------------------------------------
;----------------------------------------------------
Object OldSovietUnionNuclearMisslie

  ; *** ART Parameters ***
;  SelectPortrait         = RSNuclear
;  ButtonImage            = RSNuclear

  ; ----------------- Main Building ------------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  AnimationsRequirePower = No
    ; day ******************************************
    ConditionState       = NONE
      Model               = RBNuck
      TransitionKey = TRANS_build
    End
    ConditionState       = DAMAGED
      Model              = RBNuck
      TransitionKey = TRANS_build
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = RBNuck_D
      TransitionKey = TRANS_build
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = None
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      TransitionKey = TRANS_Unbuild
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = None
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      TransitionKey = TRANS_Unbuild
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = None
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      TransitionKey = TRANS_Unbuild
    End

    TransitionState = TRANS_build TRANS_Unbuild
      Model               = RBNuck_B
      Animation         = RBNuck_B.RBNuck_B
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    END
    TransitionState = TRANS_Unbuild TRANS_build
      Model               = RBNuck_B
      Animation         = RBNuck_B.RBNuck_B
      AnimationMode     = ONCE
      Flags             = START_FRAME_FIRST
    END

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = SOLD
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED

    ConditionState      = DOOR_1_OPENING
      Model             = RBNuck
      Animation         = RBNuck.RBNuck
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState      = DOOR_1_WAITING_OPEN
      Model             = RBNuck
      Animation         = RBNuck.RBNuck
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End
    ConditionState      = DOOR_1_WAITING_TO_CLOSE
      Model             = RBNuck_A1
      Animation         = RBNuck_A1.RBNuck_A1
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
    End
    ConditionState      = DOOR_1_CLOSING
      Model             = RBNuck_A1
      Animation         = RBNuck_A1.RBNuck_A1
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End

    ConditionState      = DOOR_1_OPENING DAMAGED
      Model             = RBNuck
      Animation         = RBNuck.RBNuck
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED
      Model             = RBNuck
      Animation         = RBNuck.RBNuck
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED
      Model             = RBNuck_A1
      Animation         = RBNuck_A1.RBNuck_A1
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
    End
    ConditionState      = DOOR_1_CLOSING DAMAGED
      Model             = RBNuck_A1
      Animation         = RBNuck_A1.RBNuck_A1
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End

    ConditionState      = DOOR_1_OPENING REALLYDAMAGED
      Model             = RBNuck_D
      Animation         = RBNuck_D.RBNuck_D
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED
      Model             = RBNuck_D
      Animation         = RBNuck_D.RBNuck_D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED
      Model             = RBNuck_AD
      Animation         = RBNuck_AD.RBNuck_AD
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
    End
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED
      Model             = RBNuck_AD
      Animation         = RBNuck_AD.RBNuck_AD
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End
  End

  Draw                = W3DModelDraw ModuleTag_05A
    OkToChangeModelColor = Yes
  AnimationsRequirePower = No

    ConditionState       = NONE
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = SKladBig
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      TransitionKey   = UP_DAY
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = None
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = SOLD
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED

    TransitionState   = UP_DAY DOWN_DEFAULT
      Model              = SKladBig
      Animation          = SKladBig.SKladBig
      AnimationMode   = ONCE
      Flags           = START_FRAME_First ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    TransitionState   = DOWN_DEFAULT UP_DAY
      Model              = SKladBig
      Animation          = SKladBig.SKladBig
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
  ENd

  Draw = W3DModelDraw ModuleTag_82
  OkToChangeModelColor = Yes
  AnimationsRequirePower = No

    DefaultConditionState
      Model           = None
    End

    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = SKladbox
      Animation          = SKladbox.SKladbox
      AnimationMode   = Loop
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:OldSovietNuclearMissile
  EditorSorting    = STRUCTURE
  Prerequisites
  End
  EnergyProduction = -5
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ShroudRevealToAllRange = 60  ; Reveals shroud to all players at a specific amount which can be different.
                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!
  CommandSet       = OldSovietNuclearMissileCommandSet
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 400 400 400 400  ; Experience point value at each level

  MaxSimultaneousOfType = 1

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE  FS_TECHNOLOGY POWERED MP_COUNT_FOR_VICTORY CAPTURABLE
 Body            = StructureBody ModuleTag_06
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 4200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior    = OCLSpecialPower ModuleTag_07
    SpecialPowerTemplate = SuperweaponNeutronMissile
    OCL                  = SUPERWEAPON_OldSovietNeutronMissile
  End

  Behavior = MissileLauncherBuildingUpdate ModuleTag_09
    SpecialPowerTemplate = SuperweaponNeutronMissile
    DoorOpenTime         = 8000
    DoorWaitOpenTime     = 2000
    DoorCloseTime        = 8000

    ; FXLists to play at transitions:
    DoorOpeningFX        = ChinaNuclearMissileLauncherDoorOpen
    ;DoorOpenFX           = FX_ABPowerPlantExplode
    DoorWaitingToCloseFX = ChinaNuclearMissileLauncherLaunch
    ;DoorClosingFX        = FX_ABPowerPlantExplode
    ;DoorClosedFX         = FX_ABPowerPlantExplode

    ; looping sound to play while open:
    DoorOpenIdleAudio = BuildingNeutronMissileHiss
  End

  Behavior = ProductionUpdate ModuleTag_10
    DisabledTypesToProcess = DISABLED_HELD DISABLED_UNDERPOWERED
  End

;  Behavior = MissileLauncherBuildingUpdate ModuleTag_09
;    SpecialPowerTemplate = SuperweaponSovietNucklearMissile
;    DoorOpenTime         = 2000 ;;3000
;    DoorWaitOpenTime     = 2000
;    DoorCloseTime        = 3000
;    DoorOpeningFX        = SovietNukeSiloOpenFX
;    DoorWaitingToCloseFX = SovietNukeSiloInActionFX
;    DoorOpenIdleAudio = BuildingNeutronMissileHiss
;  End

  Behavior = ProductionUpdate ModuleTag_10
    DisabledTypesToProcess = DISABLED_HELD DISABLED_UNDERPOWERED
  End

  Behavior = DestroyDie ModuleTag_11
    ;Nothing
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon = ChinaPowerPlantDeathWeapon
    StartsActive  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior             = CreateObjectDie ModuleTag_20
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior        = FXListDie ModuleTag_21
    ExemptStatus  = UNDER_CONSTRUCTION
    DeathFX       = FX_NukeGLA
  End
  Behavior = AIUpdateInterface ModuleTag_66
  End

  Geometry            = BOX
  GeometryMajorRadius = 45.0
  GeometryMinorRadius = 55.0
  GeometryHeight      = 22.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME

End

